# AcuTrace - Party Ledger & Fund Flow Intelligence Transformation

## Vision
Transform AcuTrace into a **party-centric money movement investigator** focused on XLS/XLSX only uploads with advanced Party Ledger and Fund Flow analysis.

---

## âœ… COMPLETED ITEMS

### Phase 2: Frontend - Landing Page
- [x] âœ… 2.1.1 XLS-only upload messaging
- [x] âœ… 2.1.2 Party ledger & fund flow focus
- [x] âœ… 2.1.3 Remove PDF references
- [x] âœ… 2.1.4 Add party detection features description
- [x] âœ… 2.1.5 Add fund flow chain visualization
- [x] âœ… 2.1.6 Premium dark gradient finance theme

### Phase 3: Frontend - Analysis Page (JUST COMPLETED)
- [x] âœ… Changed from PDF to XLS/XLSX upload only
- [x] âœ… Updated drag-drop to accept .xls, .xlsx files
- [x] âœ… Updated upload mode to support 2-20+ files
- [x] âœ… Changed title from "Premium Fraud Analysis" to "Party Ledger & Fund Flow Analysis"
- [x] âœ… Updated feature cards to show party/flow focus (AI Party Detection, Credit/Debit Links, Fund Flow Chains, Auto Ledger)
- [x] âœ… Changed step labels from fraud to party detection terms
- [x] âœ… Updated upload button text
- [x] âœ… Changed progress bar colors to green/emerald theme

### Phase 4: Frontend - Results Dashboard (JUST COMPLETED)
- [x] âœ… Updated header from "FinSecure AI" to "AcuTrace"
- [x] âœ… Changed "Analysis Results" to "Party Ledger Analysis"
- [x] âœ… Removed Risk Assessment card (fraud-focused)
- [x] âœ… Added Party Ledger Summary with credit/debit/net totals
- [x] âœ… Added Fund Flow Chains section
- [x] âœ… Updated summary cards for party/flow focus
- [x] âœ… Created Party Ledger tab with complete party summary table
- [x] âœ… Created Fund Flows tab with chain visualization
- [x] âœ… Simplified filter system to only 4 types (Credit, Debit, Transfer, UPI)
- [x] âœ… Updated PDF Report generation to focus on Party Ledger + Fund Flow

### Backend Services - Fund Flow
- [x] âœ… fund_flow_chain_builder.py - Cross-party credit/debit relation mapping
- [x] âœ… fund_flow_chain_builder.py - Amount matching (Â±2 INR) for correlation
- [x] âœ… fund_flow_chain_builder.py - Date proximity matching (Â±1 day)
- [x] âœ… fund_flow_chain_builder.py - Fund flow chain generation: Party A â†’ Party B â†’ Party C â†’ ...

### Backend Dependencies
- [x] âœ… requirements.txt - Already clean (No PDF/ML dependencies)

---

## ğŸ“‹ REMAINING TASKS - Phase 1: Backend Core

### 1.2 Enhance excel_processor.py
- [ ] Improve transaction extraction from XLS/XLSX
- [ ] Add AI party name extraction from narration using pattern matching
- [ ] Support multiple sheet handling
- [ ] Add column auto-detection (Date, Description, Amount, Credit, Debit)
- [ ] Add spelling tolerance and normalization for party names

### 1.3 Enhance entity_normalizer.py
- [ ] Advanced party name extraction from transaction narration
- [ ] UPI handle detection and clustering
- [ ] Merchant name normalization
- [ ] Fuzzy matching for similar party names
- [ ] Cross-reference linking between parties

### 1.5 Update main.py
- [ ] Update API title from "FinSecure AI" to "AcuTrace"
- [ ] Update API description for XLS-only party ledger focus
- [ ] Add party ledger generation endpoints
- [ ] Add fund flow chain endpoints
- [ ] Add party explorer endpoints
- [ ] Add multi-file correlation endpoints

---

## ğŸ“‹ REMAINING TASKS - Phase 5: UI/UX Premium Theme

### 5.2 Components to Create/Update
- [ ] PartyLedgerTable.jsx - Create NEW component (or use inline version)
- [ ] FundFlowChainDisplay.jsx - Create NEW component (or use inline version)
- [ ] FilterBar.jsx - Update to show only 4 filters

---

## ğŸ“‹ REMAINING TASKS - Phase 6: Cleanup & Remove Deprecated Code

### 6.1 Backend Cleanup
- [ ] Remove pdf_processor.py
- [ ] Remove fraud_detector.py
- [ ] Remove report_generator.py (fraud-focused)
- [ ] Remove file_processor.py (replace with excel_processor.py)
- [ ] Remove fraud-related test files

### 6.2 Frontend Cleanup
- [ ] Remove FraudExplanationBox.jsx (fraud-focused)
- [ ] Remove RiskIndicators.jsx (fraud-focused)
- [ ] Remove CorrelationTable.jsx (fraud-focused)
- [ ] Remove CorrelationChainsTable.jsx (fraud-focused)
- [ ] Remove StatsGrid.jsx (if not needed)
- [ ] Remove StatsCard.jsx (if not needed)
- [ ] Remove FilterPills.jsx (replaced by filter buttons)

---

## ğŸ“‹ REMAINING TASKS - Phase 7: Testing & Verification

### 7.1 Backend Testing
- [ ] Test XLS-only upload
- [ ] Test multi-file upload (2-20 files)
- [ ] Test party detection accuracy
- [ ] Test fund flow chain building
- [ ] Test party ledger generation
- [ ] Test API endpoints

### 7.2 Frontend Testing
- [ ] Test XLS drag-drop upload
- [ ] Test party explorer
- [ ] Test fund flow display
- [ ] Test party ledger view
- [ ] Test filters (4 types only)
- [ ] Test export functionality

### 7.3 Verification Message
- [ ] System says after build/update:
  ```
  "All transactions fetched accurately from uploaded XLS files. Party relations detected from narration. Fund flow chains built correctly. Only XLS upload is supported, PDF upload is removed."
  ```

---

## Additional Premium Features (Future)

### 8.1 Advanced Party Detection
- [ ] AI-powered entity extraction from narration
- [ ] UPI handle clustering (e.g., @upi, @okhdfcbank)
- [ ] Merchant name standardization
- [ ] Phone number pattern matching
- [ ] Account number masking detection

### 8.2 Fund Flow Intelligence
- [ ] Multi-hop chain detection
- [ ] Circular flow detection
- [ ] Common intermediary identification
- [ ] Largest flow path highlighting
- [ ] Time-based flow analysis

### 8.3 Party Relations
- [ ] Who sent to whom matrix
- [ ] Shared reference detection
- [ ] UPI handle correlation
- [ ] Transaction frequency analysis
- [ ] Average transaction size per party

### 8.4 Export Features
- [ ] JSON export (full analysis)
- [ ] PDF Report (party ledger + fund flow) - âœ… Already has basic version
- [ ] QR Code sharing - âœ… Already implemented
- [ ] Party-wise summary export

---

## Progress Tracking

### âœ… COMPLETED Phases:
- **Phase 2: Landing Page** - COMPLETE
- **Phase 3: Analysis Page** - COMPLETE
- **Phase 4: Results Dashboard** - COMPLETE
- **Backend Fund Flow** - COMPLETE
- **Backend Dependencies** - COMPLETE (already clean)

### ğŸ”„ IN PROGRESS:
- None (waiting for next tasks)

### â³ Pending Phases:
- Phase 1: Backend Core (partial)
- Phase 5: Premium UI (new components)
- Phase 6: Cleanup (remove deprecated files)
- Phase 7: Testing & Verification

---

## Expected Output Message

After successful build/update, the system should output:

```
âœ… AcuTrace Party Ledger & Fund Flow Intelligence Platform Ready!

Features:
- âœ… XLS/XLSX Only Upload (2-20+ files)
- âœ… AI Party Detection from Narration
- âœ… Cross-Party Credit/Debit Relations
- âœ… Fund Flow Chain Builder
- âœ… Auto-Generated Party Ledger
- âœ… Premium Investigation Dashboard
- âœ… JSON / PDF / QR Export
- âŒ PDF Upload Removed
- âŒ CSV Export Removed
- âŒ Fraud Modules Removed
- âŒ Risk Scoring Removed

All transactions fetched accurately from uploaded XLS files. 
Party relations detected from narration. 
Fund flow chains built correctly. 
Only XLS upload is supported, PDF upload is removed.
```

---

## ğŸš€ RECENT COMPLETIONS (Current Session)

1. **AnalysisPage.jsx** - Converted from PDF fraud analysis to XLS party ledger analysis
   - âœ… Changed file upload from PDF to XLS/XLSX
   - âœ… Updated title and description
   - âœ… Changed feature cards to party/flow focus
   - âœ… Updated progress steps
   - âœ… Changed theme colors to green/emerald

2. **ResultsPage.jsx** - Converted from fraud detection to party ledger focus
   - âœ… Removed fraud risk assessment
   - âœ… Added party ledger summary
   - âœ… Added fund flow chains section
   - âœ… Created 4-tab navigation (Overview, Party Ledger, Fund Flows, Transactions)
   - âœ… Simplified filters to 4 types
   - âœ… Updated PDF report generation
   - âœ… Changed branding to AcuTrace

3. **TODO_ACUTRACE.md** - Updated with completion status
   - âœ… Marked completed items
   - âœ… Organized remaining tasks
   - âœ… Added progress tracking
